From 61a2da998bf447c0e9aea9d5d0c1a7472715b1df Mon Sep 17 00:00:00 2001
From: Michael Webster <miketwebster@gmail.com>
Date: Sat, 10 Mar 2018 00:39:37 -0500
Subject: [PATCH] build: Use cinnamon-desktop instead of gnome-desktop.

---
 configure.ac               | 6 ++----
 debian/control             | 3 +--
 src/xviewer-file-chooser.c | 2 +-
 src/xviewer-thumbnail.c    | 2 +-
 4 files changed, 5 insertions(+), 8 deletions(-)

diff --git a/configure.ac b/configure.ac
index 3b168dd..f0f8bc7 100644
--- a/configure.ac
+++ b/configure.ac
@@ -87,12 +87,11 @@ YELP_HELP_INIT
 
 GTK_REQUIRED=3.10.0
 GLIB_REQUIRED=2.38.0
-GNOME_DESKTOP_REQUIRED=2.91.2
+CINNAMON_DESKTOP_REQUIRED=3.2.0
 GDKPIXBUF_REQUIRED=2.4.0
 GTK_PRINT_REQUIRED=3.5.4
 SHARED_MIME_INFO_REQUIRED=0.20
 EXEMPI_REQUIRED=1.99.5
-DESKTOP_SCHEMAS_REQUIRED=2.91.92
 LIBPEAS_REQUIRED=0.7.4
 LIBPEAS_GTK_REQUIRED=0.7.4
 
@@ -100,11 +99,10 @@ XVIEWER_MODULES="gtk+-3.0 >= $GTK_REQUIRED \
              glib-2.0 >= $GLIB_REQUIRED \
              gio-2.0 >= $GLIB_REQUIRED \
              gio-unix-2.0 >= $GLIB_REQUIRED \
-             gnome-desktop-3.0 >= $GNOME_DESKTOP_REQUIRED \
+             cinnamon-desktop >= $CINNAMON_DESKTOP_REQUIRED \
              gdk-pixbuf-2.0 >= $GDKPIXBUF_REQUIRED \
              gtk+-unix-print-3.0 >= $GTK_PRINT_REQUIRED \
              shared-mime-info >= $SHARED_MIME_INFO_REQUIRED \
-             gsettings-desktop-schemas >= $DESKTOP_SCHEMAS_REQUIRED \
              libpeas-1.0 >= $LIBPEAS_REQUIRED \
              libpeas-gtk-1.0 >= $LIBPEAS_GTK_REQUIRED"
 
diff --git a/debian/control b/debian/control
index 601b98a..ab53292 100644
--- a/debian/control
+++ b/debian/control
@@ -15,9 +15,8 @@ Build-Depends: cdbs (>= 0.4.41),
                libgtk-3-dev,
                libgdk-pixbuf2.0-dev (>= 2.19.1),
                libglib2.0-dev (>= 2.38.0),
-               libgnome-desktop-3-dev (>= 2.91.2),
+               libcinnamon-desktop-dev (>=3.2.0),
                shared-mime-info (>= 0.20),
-               gsettings-desktop-schemas-dev (>= 2.91.92),
                libpeas-dev (>= 0.7.4),
                yelp-tools,
                zlib1g-dev,
diff --git a/src/xviewer-file-chooser.c b/src/xviewer-file-chooser.c
index adaee1d..f9c952d 100644
--- a/src/xviewer-file-chooser.c
+++ b/src/xviewer-file-chooser.c
@@ -33,7 +33,7 @@
 #ifndef GNOME_DESKTOP_USE_UNSTABLE_API
 #define GNOME_DESKTOP_USE_UNSTABLE_API
 #endif
-#include <libgnome-desktop/gnome-desktop-thumbnail.h>
+#include <libcinnamon-desktop/gnome-desktop-thumbnail.h>
 
 static char *last_dir[] = { NULL, NULL, NULL, NULL };
 
diff --git a/src/xviewer-thumbnail.c b/src/xviewer-thumbnail.c
index 26ee6a0..db42124 100644
--- a/src/xviewer-thumbnail.c
+++ b/src/xviewer-thumbnail.c
@@ -31,7 +31,7 @@
 #ifndef GNOME_DESKTOP_USE_UNSTABLE_API
 #define GNOME_DESKTOP_USE_UNSTABLE_API
 #endif
-#include <libgnome-desktop/gnome-desktop-thumbnail.h>
+#include <libcinnamon-desktop/gnome-desktop-thumbnail.h>
 
 #include "xviewer-thumbnail.h"
 #include "xviewer-list-store.h"
