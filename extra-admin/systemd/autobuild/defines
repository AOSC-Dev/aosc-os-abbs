PKGNAME=systemd
PKGSEC=admin
PKGDEP="glib lz4 xz acl bash cryptsetup curl elfutils gnutls kbd kmod \
        libcap libidn2 libmicrohttpd linux-pam util-linux libgcrypt hwdata \
        libgpg-error iptables libxkbcommon qrencode aosc-aaa trousers libseccomp pcre2"
BUILDDEP="gperf intltool docbook-xsl lxml gobject-introspection \
          meson ninja gtk-doc"
PKGDES="System and service manager"

ABTYPE=meson
MESON_AFTER="-Dkmod=true \
             -Dxkbcommon=true \
             -Dblkid=true \
             -Dima=false \
             -Dselinux=false \
             -Dapparmor=false \
             -Dpolkit=true \
             -Dxz=true \
             -Dzlib=true \
             -Dbzip2=true \
             -Dlz4=true \
             -Dpam=true \
             -Dacl=true \
             -Dsmack=true \
             -Dgcrypt=true \
             -Daudit=false \
             -Delfutils=true \
             -Dlibcryptsetup=true \
             -Delfutils=true \
             -Dqrencode=true \
             -Dgnutls=true \
             -Dmicrohttpd=true \
             -Dlibidn=false \
             -Dlibidn2=true \
             -Dlibiptc=true \
             -Dlibcurl=true \
             -Dtpm=true \
             -Dhwdb=true \
             -Dsysusers=true \
             -Ddefault-kill-user-processes=false \
             -Dseccomp=true \
             -Dman=true \
             -Dfallback-hostname=aosc \
             -Dnobody_user=systemd-nobody -Dnobody_group=systemd-nogroup \
             -Dntp-servers=pool.ntp.org"


BUILDDEP__AMD64="${BUILDDEP} gnu-efi"
MESON_AFTER__AMD64="${MESON_AFTER} -Defi=true"

BUILDDEP__ARM64="${BUILDDEP} gnu-efi"
MESON_AFTER__ARM64="${MESON_AFTER} -Defi=true"

PKGBREAK="systemd-sysv<=1"
PKGREP="systemd-sysv<=1"

# armel version sync.
PKGEPOCH=1

PKGBREAK="openresolv<=3.9.0"
PKGREP="openresolv<=3.9.0"
PKGPROV="openresolv==1:0"
