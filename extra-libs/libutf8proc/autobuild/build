mkdir -pv "$SRCDIR"/build

(
    cd "$SRCDIR"/build

    abinfo "Running CMake for $PKGNAME ..."
    cmake .. ${CMAKE_DEF} ${CMAKE_AFTER}

    abinfo "Building $PKGNAME ..."
    make
)

abinfo "Installing $PKGNAME ..."
install -Dvm644 "$SRCDIR"/utf8proc.h \
    "$PKGDIR"/usr/include/libutf8proc/utf8proc.h
install -Dvm755 "$SRCDIR"/build/libutf8proc.so.2.3.1 \
    "$PKGDIR"/usr/lib/libutf8proc.so.2.3.1

abinfo "Creating symlinks for runtime libraries ..."
ln -sv libutf8proc.so.2.3.1 \
    "$PKGDIR"/usr/lib/libutf8proc.so.${PKGVER:0:1}
ln -sv libutf8proc.so.2.3.1 \
    "$PKGDIR"/usr/lib/libutf8proc.so
