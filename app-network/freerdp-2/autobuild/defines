PKGNAME=freerdp-2
PKGSEC=net
PKGDEP="alsa-lib cups faac faad2 ffmpeg fuse-3 gsm gst-plugins-base-1-0 krb5 \
        lame libcl libusb linux-pam openh264 openssl pcsclite pulseaudio \
        sdl2-ttf soxr wayland webkit2gtk x11-lib"
BUILDDEP="docbook-xsl opencl-registry-api"
PKGDES="A free implementation of the Remote Desktop Protocol (RDP)"

CMAKE_AFTER="-DWITH_ALSA=ON \
             -DWITH_CAIRO=ON \
             -DWITH_CHANNELS=ON \
             -DWITH_CLIENT=ON \
             -DWITH_CLIEN_CHANNELS=ON \
             -DWITH_CLIENT_COMMON=ON \
             -DWITH_CLIENT_INTERFACE=ON \
             -DWITH_CUPS=ON \
             -DWITH_DSP_FFMPEG=ON \
             -DWITH_FAAC=ON \
             -DWITH_FAAD2=ON \
             -DWITH_FFMPEG=ON \
             -DWITH_GSM=ON \
             -DWITH_GSSAPI=ON \
             -DWITH_ICU=ON \
             -DWITH_IPP=OFF \
             -DWITH_JPEG=ON \
             -DWITH_LAME=ON \
             -DWITH_LIBSYSTEMD=ON \
             -DWITH_MANPAGES=ON \
             -DWITH_OPENCL=OFF \
             -DWITH_OPENH264=ON \
             -DWITH_OPENSLES=OFF \
             -DWITH_OPENSSL=ON \
             -DWITH_OSS=OFF \
             -DWITH_PAM=ON \
             -DWITH_PCSC=ON \
             -DWITH_PROXY=ON \
             -DWITH_PROXY_MODULES=ON \
             -DWITH_PULSE=ON \
             -DWITH_SERVER=ON \
             -DWITH_SERVER_CHANNELS=ON \
             -DWITH_SERVER_INTERFACE=ON \
             -DWITH_SHADOW=ON \
             -DWITH_SMARTCARD_INSPECT=ON \
             -DWITH_SOXR=ON \
             -DWITH_SWSCALE=ON \
             -DWITH_VAAPI=ON \
             -DWITH_WAYLAND=ON \
             -DWITH_WINPR_TOOLS=ON \
             -DWITH_X11=ON \
             -DWITH_XCURSOR=ON \
             -DWITH_XDAMAGE=ON \
             -DWITH_XEXT=ON \
             -DWITH_XFIXES=ON \
             -DWITH_XI=ON \
             -DWITH_XINERAMA=ON \
             -DWITH_XKBFILE=ON \
             -DWITH_XRANDR=ON \
             -DWITH_XRENDER=ON \
             -DWITH_XSHM=ON \
             -DWITH_XTEST=ON \
             -DWITH_XV=ON \
             -DWITH_ZLIB=ON \
             -DWITH_THIRD_PARTY=OFF \
             -DCMAKE_INSTALL_LIBDIR=/usr/lib"
PKGEPOCH=2

PKGBREAK="gnome-boxes<=42.3-1 gnome-remote-desktop<=42.4 \
          gtk-frdp<=3.37.1+git20220411 remmina<=1.4.31-1 vinagre<=3.22.0-6 \
          weston<=14.0.0"
